# -*- mode: org; -*-
#+title: CMake Generics

#+begin_src cmake
  if(NOT EXISTS ${CMAKE_CURRENT_BINARY_DIR}/Generics.cmake)
    file(
      DOWNLOAD "https://github.com/wouterbeek/cmake-generics/raw/v0.2.2/Generics.cmake"
      ${CMAKE_BINARY_DIR}/Generics.cmake
      INACTIVITY_TIMEOUT 1
      LOG ${CMAKE_BINARY_DIR}/Generics.cmake.log
      SHOW_PROGRESS
      STATUS status-object
      TLS_VERIFY ON)
    list(GET status-object 0 status-code)
    if(NOT status-code EQUAL 0)
      list(GET status-object 1 status-message)
      file(REMOVE ${CMAKE_BINARY_DIR}/Generics.cmake)
      message(FATAL_ERROR "Could not download ‘Generics.cmake’ file: " ${status-message})
    endif()
  endif()
  include(${CMAKE_CURRENT_BINARY_DIR}/Generics.cmake)
#+end_src
